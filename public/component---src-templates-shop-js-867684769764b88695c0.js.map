{"version":3,"sources":["webpack://protoproto/./src/components/StockLevel.js","webpack://protoproto/./src/templates/shop.js"],"names":["_ref","_ref$stock","stock","React","className","data","entry","craftShopShopEntry","seomatic","productCollections","activeProduct","currencys","useContext","myContext","product","price","forEach","obj","Object","keys","length","push","StoryBlock","useMemo","_ref2","_price$","_price$2","_price$3","image","title","productEditions","comingSoon","defaultPriceAsCurrency","eager","GatsbyImage","loading","alt","StockLevel","euroPrice","usdPrice","audPrice","Layout","showNav","map","_ref3","i","featureImage","products","img","key","uri","TransitionLink","to","getImage","localFile"],"mappings":"2HAQA,IANmB,SAAHA,GAAA,IAAAC,EAAAD,EAAME,aAAK,IAAAD,EAAG,EAACA,EAAA,OAC7BE,gBAAA,WAAK,cACQA,gBAAA,QAAMC,UAAU,eAAeF,GAAa,W,yGCyK3D,UApKqB,SAAHF,GAAkB,IAAZK,EAAIL,EAAJK,KACMC,EAAUD,EAA9BE,mBACAC,EAAiCF,EAAjCE,SAAUC,EAAuBH,EAAvBG,mBACZC,EAAgB,GAEdC,GAAcC,gBAAWC,KAAzBF,UAGMN,EAAKE,mBAAmBE,mBAAmB,GAAGK,QAAQ,GAAGC,MAAM,GAG7EN,EAAmBO,SAAQ,SAACC,GACc,IAApCC,OAAOC,KAAKF,EAAIH,SAASM,QAC3BV,EAAcW,KAAKJ,MAKvB,IAAMK,GAAaC,cAAU,kBAAM,SAAAC,GAE5B,IAADC,EAAAC,EAAAC,EAFgCC,EAAKJ,EAALI,MAAOC,EAAKL,EAALK,MAAOC,EAAeN,EAAfM,gBAAyCC,GAAFP,EAAtBQ,uBAAkCR,EAAVO,YAAYE,EAAKT,EAALS,MAAOlB,EAAKS,EAALT,MAExG,OACAZ,2BAAA,KACEA,gBAAC+B,IAAW,CACVN,MAAOA,EACPxB,UAAS,kBACP2B,EAAa,mBAAqB,IAEpCI,QAASF,EAAK,eACdG,IAAI,KAENjC,gBAAA,OAAKC,UAAU,yBAAyByB,GACvCE,GAAc5B,gBAAA,OAAKC,UAAU,QAAO,gBACnC2B,GAAcD,GACd3B,gBAACkC,IAAU,CAACnC,MAAO4B,IAErB3B,gBAAA,OAAKC,UAAU,QAAqB,OAAbO,EAAkB,MAAgB,QAAhBc,EAAQV,EAAM,UAAE,IAAAU,OAAA,EAARA,EAAUa,WAA2B,OAAb3B,EAAkB,MAAgB,QAAhBe,EAAQX,EAAM,UAAE,IAAAW,OAAA,EAARA,EAAUa,UAAwB,OAAb5B,EAAkB,OAAiB,QAAjBgB,EAASZ,EAAM,UAAE,IAAAY,OAAA,EAARA,EAAUa,UAAW,QAGhL,CAAC7B,IAGH,OACER,gBAACsC,IAAM,CAACC,SAAS,EAAMlC,SAAUA,GAC/BL,gBAAA,OAAKC,UAAU,oDACbD,gBAAA,OAAKC,UAAU,gBACbD,gBAAA,OAAKC,UAAU,8CAEZM,EAAcU,OAAS,GACxBV,EAAciC,KACV,SAAAC,EAAkDC,GAAO,IAAtDC,EAAYF,EAAZE,aAAuBC,EAAQH,EAAjB9B,QAAmBiB,EAAUa,EAAVb,WAE3BjB,EAAWiC,EAAQ,GACnBC,EAAOF,EAAY,GAE1B,OACE3C,gBAAA,OACE8C,IAAKJ,EACLzC,UAAS,4DACP2B,EAAa,YAAc,MAI3BA,IAAcjB,aAAO,EAAPA,EAASoC,MACvB/C,gBAACgD,IAAc,CAACF,IAAKJ,EAAGO,GAAE,IAAMtC,EAAQoC,KACtC/C,gBAACmB,EAAU,CACTM,OAAOyB,OAASL,aAAG,EAAHA,EAAKM,WACrBzB,MAAOf,EAAQe,MACfC,gBAAiBhB,EAAQgB,gBACzBE,uBACElB,EAAQkB,uBAEVjB,MAAOD,EAAQC,MACfgB,WAAYA,EACZE,MAAOY,EAAI,KAMhBd,GACC5B,gBAACmB,EAAU,CACTM,OAAOyB,OAASL,aAAG,EAAHA,EAAKM,WACrBzB,MAAOf,EAAQe,MACfC,gBAAiBhB,EAAQgB,gBACzBE,uBACElB,EAAQkB,uBAEVD,WAAYA,EACZE,MAAOY,EAAI","file":"component---src-templates-shop-js-867684769764b88695c0.js","sourcesContent":["import React from \"react\"\n\nconst StockLevel = ({ stock = 0 }) => (\n  <div>\n    Edition of <span className=\"stock-level\">{stock}</span> only\n  </div>\n)\n\nexport default StockLevel\n","import React, { useContext, useMemo } from \"react\"\nimport { graphql } from \"gatsby\"\nimport { GatsbyImage, getImage } from \"gatsby-plugin-image\"\n\nimport Layout from \"@components/Layout\"\nimport StockLevel from \"@components/StockLevel\"\nimport TransitionLink from \"../components/TransitionLink\"\nimport { myContext } from \"../context/provider\"\n\nconst ShopTemplate = ({ data }) => {\n  const { craftShopShopEntry: entry } = data\n  const { seomatic, productCollections } = entry\n  const activeProduct = []\n\n  const { currencys } = useContext(myContext)\n\n\n  const price = data.craftShopShopEntry.productCollections[0].product[0].price[0];\n  \n\n  productCollections.forEach((obj) => {\n    if (Object.keys(obj.product).length !== 0) {\n      activeProduct.push(obj)\n    }\n  })\n\n  /* Story block component: either a link or static image */\n  const StoryBlock = useMemo(  () => ({ image, title, productEditions, defaultPriceAsCurrency, comingSoon, eager, price}) =>\n\n        { return (\n          <>\n            <GatsbyImage\n              image={image}\n              className={`w-full h-full ${\n                comingSoon ? \"image--greyscale\" : \"\"\n              }`}\n              loading={eager ? `eager` : `lazy`}\n              alt=\"\"\n            />\n            <div className=\"mt-2 mb-0.5 font-bold\">{title}</div>\n            {comingSoon && <div className=\"mt-2\">Coming Soon</div>}\n            {!comingSoon && productEditions && (\n              <StockLevel stock={productEditions} />\n            )}\n            <div className=\"mt-1\">{currencys == \"EUR\" ? `â‚¬ ${price[0]?.euroPrice}` : currencys == \"USD\" ? `$ ${price[0]?.usdPrice}`:currencys == \"AUD\" ? `A$ ${price[0]?.audPrice}`:''}</div>\n          </>\n        )},\n    [currencys]\n  )\n\n  return (\n    <Layout showNav={true} seomatic={seomatic}>\n      <div className=\"container mx-auto overflow-hidden md:pt-32 pt-28\">\n        <div className=\"md:px-0 px-6\">\n          <div className=\"flex items-center justify-center flex-wrap\">\n            {/* Loop and render each product */}\n            {activeProduct.length > 0 &&\n            activeProduct.map(\n                ({ featureImage, product: products, comingSoon }, i) => {\n\n                  const [product] = products\n                  const [img] = featureImage\n\n                  return (\n                    <div\n                      key={i}\n                      className={`sm:w-5/12 lg:w-1/4 w-full mb-auto pb-7 md:pb-14 sm:mx-3 ${\n                        comingSoon ? \"text-grey\" : \"\"\n                      }`}\n                    >\n                      {/* Link wrapper */}\n                      {!comingSoon && product?.uri && (\n                        <TransitionLink key={i} to={`/${product.uri}`}>\n                          <StoryBlock\n                            image={getImage(img?.localFile)}\n                            title={product.title}\n                            productEditions={product.productEditions}\n                            defaultPriceAsCurrency={\n                              product.defaultPriceAsCurrency\n                            }\n                            price={product.price}\n                            comingSoon={comingSoon}\n                            eager={i > 2}\n                          />\n                        </TransitionLink>\n                      )}\n\n                      {/* Static image */}\n                      {comingSoon && (\n                        <StoryBlock\n                          image={getImage(img?.localFile)}\n                          title={product.title}\n                          productEditions={product.productEditions}\n                          defaultPriceAsCurrency={\n                            product.defaultPriceAsCurrency\n                          }\n                          comingSoon={comingSoon}\n                          eager={i > 2}\n                        />\n                      )}\n                    </div>\n                  )\n                }\n              )}\n          </div>\n        </div>\n      </div>\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  {\n    craftShopShopEntry {\n      ... on Craft_shop_shop_Entry {\n        productCollections {\n          ... on Craft_productCollections_product_BlockType {\n            product {\n              title\n              uri\n              defaultPriceAsCurrency\n              ... on Craft_collaborations_Product {\n                productEditions\n                price {\n                  ... on Craft_price_price_BlockType {\n                    id\n                    audPrice\n                    usdPrice\n                    euroPrice\n                  }\n                }\n              }\n              variants {\n                ... on Craft_collaborations_Variant {\n                  stock\n                }\n              }\n            }\n            comingSoon\n            featureImage {\n              ... on Craft_uploads_Asset {\n                url\n                title\n                hasFocalPoint\n                localFile {\n                  childImageSharp {\n                    gatsbyImageData(\n                      aspectRatio: 0.8\n                      quality: 100\n                      layout: CONSTRAINED\n                    )\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      seomatic {\n        ... on Craft_SeomaticType {\n          metaJsonLdContainer\n          metaLinkContainer\n          metaScriptContainer\n          metaSiteVarsContainer\n          metaTagContainer\n          metaTitleContainer\n        }\n      }\n      \n    }\n  }\n`\n\nexport default ShopTemplate\n"],"sourceRoot":""}